!function(t){"use strict";function e(){}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function c(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){t.value=null==e?"":e}let $;function g(t){$=t}function x(t){(function(){if(!$)throw new Error("Function called outside component initialization");return $})().$$.on_mount.push(t)}const b=[],y=[],v=[],_=[],E=Promise.resolve();let w=!1;function k(t){v.push(t)}let L=!1;const T=new Set;function j(){if(!L){L=!0;do{for(let t=0;t<b.length;t+=1){const e=b[t];g(e),C(e.$$)}for(b.length=0;y.length;)y.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];T.has(e)||(T.add(e),e())}v.length=0}while(b.length);for(;_.length;)_.pop()();w=!1,L=!1,T.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const M=new Set;function N(t,e){-1===t.$$.dirty[0]&&(b.push(t),w||(w=!0,E.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(t,i,a,s,u,d,f=[-1]){const p=$;g(t);const m=i.props||{},h=t.$$={fragment:null,ctx:null,props:d,update:e,not_equal:u,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:[]),callbacks:o(),dirty:f,skip_bound:!1};let x=!1;if(h.ctx=a?a(t,m,(e,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&u(h.ctx[e],h.ctx[e]=r)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](r),x&&N(t,e)),n}):[],h.update(),x=!0,r(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(l)}else h.fragment&&h.fragment.c();i.intro&&((b=t.$$.fragment)&&b.i&&(M.delete(b),b.i(y))),function(t,e,o){const{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,o),k(()=>{const e=a.map(n).filter(c);s?s.push(...e):r(e),t.$$.on_mount=[]}),l.forEach(k)}(t,i.target,i.anchor),j()}var b,y;g(p)}function H(e){let n,o,r,c,i,d,p,h,$=e[0]&&!e[4]&&q(e);function g(t,e){return t[4]?B:t[6]?S:O}let x=g(e),b=x(e),y=e[4]&&I(e);return{c(){n=u("div"),o=u("div"),r=u("div"),c=u("h3"),c.textContent=""+t.t("texture-description.description"),i=f(),$&&$.c(),d=f(),p=u("div"),b.c(),h=f(),y&&y.c(),m(c,"class","card-title"),m(r,"class","d-flex justify-content-between align-items-center"),m(o,"class","card-header"),m(p,"class","card-body"),m(n,"class","card card-secondary")},m(t,e){s(t,n,e),a(n,o),a(o,r),a(r,c),a(r,i),$&&$.m(r,null),a(n,d),a(n,p),b.m(p,null),a(n,h),y&&y.m(n,null)},p(t,e){t[0]&&!t[4]?$?$.p(t,e):($=q(t),$.c(),$.m(r,null)):$&&($.d(1),$=null),x===(x=g(t))&&b?b.p(t,e):(b.d(1),b=x(t),b&&(b.c(),b.m(p,null))),t[4]?y?y.p(t,e):(y=I(t),y.c(),y.m(n,null)):y&&(y.d(1),y=null)},d(t){t&&l(n),$&&$.d(),b.d(),y&&y.d()}}}function q(n){let o,r,c,i,d;return{c(){o=u("button"),r=u("i"),m(r,"class","fas fa-edit"),m(o,"class","btn btn-secondary btn-sm float-right"),m(o,"title",c=t.t("texture-description.edit"))},m(t,e){s(t,o,e),a(o,r),i||(d=p(o,"click",n[8]),i=!0)},p:e,d(t){t&&l(o),i=!1,d()}}}function O(t){let e;return{c(){var t,n,o;e=u("description-content"),o="svelte-a377xa",(n="class")in(t=e)?t[n]=o:m(t,n,o)},m(n,o){s(n,e,o),e.innerHTML=t[2]},p(t,n){4&n&&(e.innerHTML=t[2])},d(t){t&&l(e)}}}function S(n){let o,r;return{c(){o=u("p"),r=u("i"),r.textContent=""+t.t("texture-description.empty")},m(t,e){s(t,o,e),a(o,r)},p:e,d(t){t&&l(o)}}}function B(t){let e,n,o;return{c(){e=u("textarea"),m(e,"class","form-control"),m(e,"rows","10")},m(r,c){s(r,e,c),h(e,t[3]),n||(o=p(e,"input",t[11]),n=!0)},p(t,n){8&n&&h(e,t[3])},d(t){t&&l(e),n=!1,o()}}}function I(e){let n,o,c,i,h,$,g,x,b,y,v=t.t("general.cancel")+"",_=e[7]&&z(e);function E(t,e){return t[5]?F:D}let w=E(e),k=w(e);return{c(){n=u("div"),_&&_.c(),o=f(),c=u("div"),i=u("button"),k.c(),$=f(),g=u("button"),x=d(v),m(i,"class","btn btn-primary"),i.disabled=h=e[5]||e[7],m(g,"class","btn btn-secondary"),g.disabled=e[5],m(c,"class","d-flex justify-content-between"),m(n,"class","card-footer")},m(t,r){s(t,n,r),_&&_.m(n,null),a(n,o),a(n,c),a(c,i),k.m(i,null),a(c,$),a(c,g),a(g,x),b||(y=[p(i,"click",e[9]),p(g,"click",e[12])],b=!0)},p(t,e){t[7]?_?_.p(t,e):(_=z(t),_.c(),_.m(n,o)):_&&(_.d(1),_=null),w===(w=E(t))&&k?k.p(t,e):(k.d(1),k=w(t),k&&(k.c(),k.m(i,null))),160&e&&h!==(h=t[5]||t[7])&&(i.disabled=h),32&e&&(g.disabled=t[5])},d(t){t&&l(n),_&&_.d(),k.d(),b=!1,r(y)}}}function z(e){let n,o,r=t.t("texture-description.exceeded",{max:e[1]})+"";return{c(){n=u("div"),o=d(r),m(n,"class","alert alert-info")},m(t,e){s(t,n,e),a(n,o)},p(e,n){2&n&&r!==(r=t.t("texture-description.exceeded",{max:e[1]})+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(o,r)},d(t){t&&l(n)}}}function D(n){let o,r=t.t("general.submit")+"";return{c(){o=d(r)},m(t,e){s(t,o,e)},p:e,d(t){t&&l(o)}}}function F(t){let n;return{c(){n=u("span"),n.innerHTML='<i class="fas fa-sync fa-spin"></i>'},m(t,e){s(t,n,e)},p:e,d(t){t&&l(n)}}}function P(t){let n,o=(t[0]||!t[6])&&H(t);return{c(){o&&o.c(),n=d("")},m(t,e){o&&o.m(t,e),s(t,n,e)},p(t,[e]){t[0]||!t[6]?o?o.p(t,e):(o=H(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(t){o&&o.d(t),t&&l(n)}}}function G(e,n,o){var r;let c="",i="",{tid:a}=n,{canEdit:s=!1}=n,l=!1,u=!1,{maxLength:d=1/0}=n;x(async()=>{o(2,c=await t.fetch.get(`/texture/${a}/description`))});let f,p;return e.$$set=t=>{"tid"in t&&o(10,a=t.tid),"canEdit"in t&&o(0,s=t.canEdit),"maxLength"in t&&o(1,d=t.maxLength)},e.$$.update=()=>{4&e.$$.dirty&&o(6,f=""===c.trim()),8202&e.$$.dirty&&o(7,p=(null!==o(13,r=null==i?void 0:i.length)&&void 0!==r?r:0)>d)},[s,d,c,i,l,u,f,p,async function(){const e=await t.fetch.get(`/texture/${a}/description`,{raw:!0});"string"==typeof e?(o(3,i=e),o(4,l=!0)):t.notify.toast.error(e.message)},async function(){o(5,u=!0);const e=await t.fetch.put(`/texture/${a}/description`,{description:i});o(5,u=!1),"string"==typeof e?(o(2,c=e),o(4,l=!1)):t.notify.toast.error(e.message)},a,function(){i=this.value,o(3,i)},()=>o(4,l=!1)]}class J extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){var e;super(),document.getElementById("svelte-a377xa-style")||((e=u("style")).id="svelte-a377xa-style",e.textContent="description-content.svelte-a377xa h1,description-content.svelte-a377xa h2{padding-bottom:0.3rem;border-bottom:1px solid #eaecef}description-content.svelte-a377xa blockquote{color:#aaa;border-left:0.3rem solid #aaa}description-content.svelte-a377xa hr{border-top-width:4px}",a(document.head,e)),A(this,t,G,P,i,{tid:10,canEdit:0,maxLength:1})}}var K;customElements.define("description-content",HTMLDivElement);const Q=document.querySelector("#texture-description");if(Q){const{dataset:t}=Q;new J({target:Q,props:{tid:function(){var t;const{pathname:e}=location,n=/(\d+)$/.exec(e);return null!==(t=null==n?void 0:n[1])&&void 0!==t?t:"0"}(),canEdit:"true"===t.canEdit,maxLength:Number.parseInt(null!==(K=t.maxLength)&&void 0!==K?K:"0")||1/0}})}}(blessing);
